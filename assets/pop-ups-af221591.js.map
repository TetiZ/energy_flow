{"version":3,"file":"pop-ups-af221591.js","sources":["../../src/js/pop-ups.js"],"sourcesContent":["import axios from 'axios';\n\nconst popAddFavButton = document.querySelector('.pop-add-fav');\nconst exPopClose = document.querySelector('.pop-ex-close-btn');\nconst exPopUpWindow = document.querySelector('.pop-backdrop');\n\nconst ratingPopUpWindow = document.querySelector('.backdrop');\nconst ratingPopUpOpen = document.querySelector('.pop-rating-btn');\nconst ratingPopUpClose = document.querySelector('.pop-up-close-btn');\n\nexPopClose.addEventListener('click', function () {\n  exPopUpWindow.classList.remove('is-open');\n});\n\nratingPopUpOpen.addEventListener('click', function () {\n  ratingPopUpWindow.classList.toggle('is-open');\n  exPopUpWindow.classList.remove('is-open');\n});\n\nratingPopUpClose.addEventListener('click', function () {\n  ratingPopUpWindow.classList.remove('is-open');\n});\n\nconst ratingStarsWrapper = document.querySelectorAll('.rating-stars-wrapper');\nif (ratingStarsWrapper.length > 0) {\n  initRatings();\n}\n\nfunction initRatings() {\n  let ratingActive, ratingValue;\n  for (let index = 0; index < ratingStarsWrapper.length; index++) {\n    const rating = ratingStarsWrapper[index];\n    initRating(rating);\n  }\n\n  function initRating(rating) {\n    initRatingVars(rating);\n\n    setRatingActiveWidth();\n\n    if (rating.classList.contains('rating-set')) {\n      setRating(rating);\n    }\n  }\n\n  function initRatingVars(rating) {\n    ratingActive = rating.querySelector('.rating-stars-line-active');\n    ratingValue = rating.querySelector('.pop-up-rating-value');\n  }\n\n  function setRatingActiveWidth(index = ratingValue.innerHTML) {\n    const ratingActiveWidth = index / 0.05;\n    ratingActive.style.width = `${ratingActiveWidth}%`;\n  }\n\n  function setRating(rating) {\n    const ratingItems = rating.querySelectorAll('.rating-stars-item');\n    for (let index = 0; index < ratingItems.length; index++) {\n      const ratingItem = ratingItems[index];\n      ratingItem.addEventListener('mouseenter', function (evt) {\n        initRatingVars(rating);\n        setRatingActiveWidth(ratingItem.value);\n      });\n      ratingItem.addEventListener('mouseleave', function (evt) {\n        setRatingActiveWidth();\n      });\n      ratingItem.addEventListener('click', function (evt) {\n        initRatingVars(rating);\n        ratingValue.innerHTML = (index + 1).toFixed(1);\n        setRatingActiveWidth();\n      });\n    }\n  }\n}\n\nconst addToFavoriteKey = 'exercise-card';\nconst exerciseCardValue = '';\n\npopAddFavButton.addEventListener('click', sendToFav);\n\nfunction sendToFav() {\n  localStorage.setItem(addToFavoriteKey, exerciseCardValue);\n}\nconst ratingForm = document.querySelector('.pop-up-rating');\nratingForm.addEventListener('submit', function (evt) {\n  evt.preventDefault();\n  const inputEmail = document.querySelector('.pop-up-input-email');\n  const userMsg = document.querySelector('.pop-up-message');\n  const rateValue = document.querySelector('.pop-up-rating-value').innerHTML;\n\n  const formData = {\n    email: inputEmail.value,\n    message: userMsg.value,\n    rating: parseFloat(rateValue),\n  };\n\n  axios\n    .post(\n      'https://energyflow.b.goit.study/api/exercises/64f389465ae26083f39b17a5/rating',\n      formData\n    )\n    .then(response => {\n      console.log(response.data);\n      ratingPopUpWindow.classList.remove('is-open');\n    })\n    .catch(error => {\n      console.log(error);\n    });\n});\n"],"names":["popAddFavButton","exPopClose","exPopUpWindow","ratingPopUpWindow","ratingPopUpOpen","ratingPopUpClose","ratingStarsWrapper","initRatings","ratingActive","ratingValue","index","rating","initRating","initRatingVars","setRatingActiveWidth","setRating","ratingActiveWidth","ratingItems","ratingItem","evt","addToFavoriteKey","exerciseCardValue","sendToFav","ratingForm","inputEmail","userMsg","rateValue","formData","axios","response","error"],"mappings":"yCAEA,MAAMA,EAAkB,SAAS,cAAc,cAAc,EACvDC,EAAa,SAAS,cAAc,mBAAmB,EACvDC,EAAgB,SAAS,cAAc,eAAe,EAEtDC,EAAoB,SAAS,cAAc,WAAW,EACtDC,EAAkB,SAAS,cAAc,iBAAiB,EAC1DC,EAAmB,SAAS,cAAc,mBAAmB,EAEnEJ,EAAW,iBAAiB,QAAS,UAAY,CAC/CC,EAAc,UAAU,OAAO,SAAS,CAC1C,CAAC,EAEDE,EAAgB,iBAAiB,QAAS,UAAY,CACpDD,EAAkB,UAAU,OAAO,SAAS,EAC5CD,EAAc,UAAU,OAAO,SAAS,CAC1C,CAAC,EAEDG,EAAiB,iBAAiB,QAAS,UAAY,CACrDF,EAAkB,UAAU,OAAO,SAAS,CAC9C,CAAC,EAED,MAAMG,EAAqB,SAAS,iBAAiB,uBAAuB,EACxEA,EAAmB,OAAS,GAC9BC,IAGF,SAASA,GAAc,CACrB,IAAIC,EAAcC,EAClB,QAASC,EAAQ,EAAGA,EAAQJ,EAAmB,OAAQI,IAAS,CAC9D,MAAMC,EAASL,EAAmBI,CAAK,EACvCE,EAAWD,CAAM,CAClB,CAED,SAASC,EAAWD,EAAQ,CAC1BE,EAAeF,CAAM,EAErBG,IAEIH,EAAO,UAAU,SAAS,YAAY,GACxCI,EAAUJ,CAAM,CAEnB,CAED,SAASE,EAAeF,EAAQ,CAC9BH,EAAeG,EAAO,cAAc,2BAA2B,EAC/DF,EAAcE,EAAO,cAAc,sBAAsB,CAC1D,CAED,SAASG,EAAqBJ,EAAQD,EAAY,UAAW,CAC3D,MAAMO,EAAoBN,EAAQ,IAClCF,EAAa,MAAM,MAAQ,GAAGQ,CAAiB,GAChD,CAED,SAASD,EAAUJ,EAAQ,CACzB,MAAMM,EAAcN,EAAO,iBAAiB,oBAAoB,EAChE,QAASD,EAAQ,EAAGA,EAAQO,EAAY,OAAQP,IAAS,CACvD,MAAMQ,EAAaD,EAAYP,CAAK,EACpCQ,EAAW,iBAAiB,aAAc,SAAUC,EAAK,CACvDN,EAAeF,CAAM,EACrBG,EAAqBI,EAAW,KAAK,CAC7C,CAAO,EACDA,EAAW,iBAAiB,aAAc,SAAUC,EAAK,CACvDL,GACR,CAAO,EACDI,EAAW,iBAAiB,QAAS,SAAUC,EAAK,CAClDN,EAAeF,CAAM,EACrBF,EAAY,WAAaC,EAAQ,GAAG,QAAQ,CAAC,EAC7CI,GACR,CAAO,CACF,CACF,CACH,CAEA,MAAMM,EAAmB,gBACnBC,EAAoB,GAE1BrB,EAAgB,iBAAiB,QAASsB,CAAS,EAEnD,SAASA,GAAY,CACnB,aAAa,QAAQF,EAAkBC,CAAiB,CAC1D,CACA,MAAME,EAAa,SAAS,cAAc,gBAAgB,EAC1DA,EAAW,iBAAiB,SAAU,SAAUJ,EAAK,CACnDA,EAAI,eAAc,EAClB,MAAMK,EAAa,SAAS,cAAc,qBAAqB,EACzDC,EAAU,SAAS,cAAc,iBAAiB,EAClDC,EAAY,SAAS,cAAc,sBAAsB,EAAE,UAE3DC,EAAW,CACf,MAAOH,EAAW,MAClB,QAASC,EAAQ,MACjB,OAAQ,WAAWC,CAAS,CAChC,EAEEE,EACG,KACC,gFACAD,CACD,EACA,KAAKE,GAAY,CAChB,QAAQ,IAAIA,EAAS,IAAI,EACzB1B,EAAkB,UAAU,OAAO,SAAS,CAClD,CAAK,EACA,MAAM2B,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CAAC"}