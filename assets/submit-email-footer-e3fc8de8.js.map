{"version":3,"file":"submit-email-footer-e3fc8de8.js","sources":["../../src/js/submit-email-footer.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.subs-form');\nconst localStorageKey = 'user-email';\n\nform.elements.email.value = localStorage.getItem(localStorageKey) ?? '';\n\nform.addEventListener('input', saveToLocalStorage);\n\nfunction saveToLocalStorage(evt) {\n  localStorage.setItem(localStorageKey, evt.target.value);\n}\n\nfunction postEmail(userEmail) {\n  fetch('https://energyflow.b.goit.study/api/subscription', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ emails: [userEmail] }),\n  })\n    .then(response => {\n      if (!response.ok) {\n        console.error('Код помилки:', response.status);\n        throw new Error('Мережевий запит не був успішним');\n      }\n      return response.json();\n    })\n    .then(data => {\n      console.log('Дані успішно відправлені', data);\n    })\n    .catch(error => {\n      console.error('Помилка при відправленні даних', error);\n    });\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const userEmail = localStorage.getItem(localStorageKey);\n\n  try {\n    await postEmail(userEmail);\n    localStorage.removeItem(localStorageKey);\n    form.reset();\n  } catch (error) {\n    console.log('Не знайдено імейл для відправлення.');\n  }\n});\n"],"names":["form","localStorageKey","saveToLocalStorage","evt","postEmail","userEmail","response","data","error","e"],"mappings":"6BAGA,MAAMA,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAkB,aAExBD,EAAK,SAAS,MAAM,MAAQ,aAAa,QAAQC,CAAe,GAAK,GAErED,EAAK,iBAAiB,QAASE,CAAkB,EAEjD,SAASA,EAAmBC,EAAK,CAC/B,aAAa,QAAQF,EAAiBE,EAAI,OAAO,KAAK,CACxD,CAEA,SAASC,EAAUC,EAAW,CAC5B,MAAM,mDAAoD,CACxD,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CAAE,OAAQ,CAACA,CAAS,EAAG,CAChD,CAAG,EACE,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,cAAQ,MAAM,eAAgBA,EAAS,MAAM,EACvC,IAAI,MAAM,iCAAiC,EAEnD,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CACZ,QAAQ,IAAI,2BAA4BA,CAAI,CAClD,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CAC3D,CAAK,CACL,CAEAR,EAAK,iBAAiB,SAAU,MAAMS,GAAK,CACzCA,EAAE,eAAc,EAEhB,MAAMJ,EAAY,aAAa,QAAQJ,CAAe,EAEtD,GAAI,CACF,MAAMG,EAAUC,CAAS,EACzB,aAAa,WAAWJ,CAAe,EACvCD,EAAK,MAAK,CACX,MAAe,CACd,QAAQ,IAAI,qCAAqC,CAClD,CACH,CAAC"}