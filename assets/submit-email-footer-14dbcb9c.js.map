{"version":3,"file":"submit-email-footer-14dbcb9c.js","sources":["../../src/js/submit-email-footer.js"],"sourcesContent":["const form = document.querySelector('.subs-form');\nconst localStorageKey = 'user-email';\nconst savedEmail = localStorage.getItem(localStorageKey);\n\nform.elements.email.value = savedEmail ? savedEmail : '';\nform.addEventListener('input', saveToLocalStorage);\nfunction saveToLocalStorage(evt) {\n  localStorage.setItem(localStorageKey, evt.target.value);\n}\nasync function postEmail(userEmail) {\n  try {\n    const response = await fetch(\n      'https://energyflow.b.goit.study/api/subscription',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email: userEmail }), // Оновлено поле з emails nа email\n      }\n    );\n    if (!response.ok) {\n      throw new Error('Мережевий запит не був успішним');\n    }\n    const data = await response.json();\n\n    iziToast.success({\n      title: 'We are excited to have you on board!',\n      message:\n        'Thank you for subscribing to new exercises on Energy Flow. You have just taken a significant step towards improving your fitness and well-being.',\n      position: 'center',\n    });\n\n    console.log('Дані успішно відправлені', data);\n  } catch (error) {}\n}\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const userEmail = localStorage.getItem(localStorageKey);\n  if (userEmail) {\n    try {\n      await postEmail(userEmail);\n      localStorage.removeItem(localStorageKey);\n      form.reset();\n\n      iziToast.success({\n        title: 'We are excited to have you on board!',\n        message:\n          'Thank you for subscribing to new exercises on Energy Flow. You have just taken a significant step towards improving your fitness and well-being.',\n        position: 'center',\n      });\n    } catch (error) {\n      console.log('Помилка при відправленні електронної пошти.');\n    }\n  } else {\n    console.log('Електронна пошта не введена.');\n  }\n});\n"],"names":["form","localStorageKey","savedEmail","saveToLocalStorage","evt","postEmail","userEmail","response","data","e"],"mappings":"AAAA,MAAMA,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAkB,aAClBC,EAAa,aAAa,QAAQD,CAAe,EAEvDD,EAAK,SAAS,MAAM,MAAQE,GAA0B,GACtDF,EAAK,iBAAiB,QAASG,CAAkB,EACjD,SAASA,EAAmBC,EAAK,CAC/B,aAAa,QAAQH,EAAiBG,EAAI,OAAO,KAAK,CACxD,CACA,eAAeC,EAAUC,EAAW,CAClC,GAAI,CACF,MAAMC,EAAW,MAAM,MACrB,mDACA,CACE,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CAAE,MAAOD,CAAS,CAAE,CAC1C,CACP,EACI,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,iCAAiC,EAEnD,MAAMC,EAAO,MAAMD,EAAS,OAE5B,SAAS,QAAQ,CACf,MAAO,uCACP,QACE,mJACF,SAAU,QAChB,CAAK,EAED,QAAQ,IAAI,2BAA4BC,CAAI,CAChD,MAAkB,CAAE,CACpB,CACAR,EAAK,iBAAiB,SAAU,MAAMS,GAAK,CACzCA,EAAE,eAAc,EAChB,MAAMH,EAAY,aAAa,QAAQL,CAAe,EACtD,GAAIK,EACF,GAAI,CACF,MAAMD,EAAUC,CAAS,EACzB,aAAa,WAAWL,CAAe,EACvCD,EAAK,MAAK,EAEV,SAAS,QAAQ,CACf,MAAO,uCACP,QACE,mJACF,SAAU,QAClB,CAAO,CACF,MAAe,CACd,QAAQ,IAAI,6CAA6C,CAC1D,MAED,QAAQ,IAAI,8BAA8B,CAE9C,CAAC"}