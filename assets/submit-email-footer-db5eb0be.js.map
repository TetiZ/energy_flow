{"version":3,"file":"submit-email-footer-db5eb0be.js","sources":["../../src/js/submit-email-footer.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.subs-form');\nconst localStorageKey = 'user-email';\n\nif (form) {\n  const savedEmail = localStorage.getItem(localStorageKey);\n\n  function saveToLocalStorage(evt) {\n    localStorage.setItem(localStorageKey, evt.target.value);\n  }\n  form.addEventListener('input', saveToLocalStorage);\n\n  form.elements.email.value = savedEmail ? savedEmail : '';\n\n  async function postEmail(userEmail) {\n    try {\n      const response = await fetch(\n        'https://energyflow.b.goit.study/api/subscription',\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ email: userEmail }),\n        }\n      );\n      if (!response.ok) {\n        console.error('Код помилки:', response.status);\n        throw new Error('Мережевий запит не був успішним');\n      }\n      const data = await response.json();\n      console.log('Дані успішно відправлені', data);\n\n      iziToast.success({\n        title: 'We are excited to have you on board!',\n        message:\n          'Thank you for subscribing to new exercises on Energy Flow. You have just taken a significant step towards improving your fitness and well-being.',\n        position: 'center',\n      });\n    } catch (error) {\n      console.error('Помилка при відправленні даних', error);\n    }\n  }\n\n  form.addEventListener('submit', async e => {\n    e.preventDefault();\n    const userEmail = savedEmail;\n    if (userEmail) {\n      try {\n        await postEmail(userEmail);\n        localStorage.removeItem(localStorageKey);\n        form.reset();\n      } catch (error) {\n        console.error('Помилка при відправленні електронної пошти.', error);\n      }\n    } else {\n      console.log('Електронна пошта не введена.');\n    }\n  });\n} else {\n  console.error('Форма не найдена.');\n}\n"],"names":["form","localStorageKey","saveToLocalStorage","evt","savedEmail","postEmail","userEmail","response","data","iziToast","error","e"],"mappings":"yCAGA,MAAMA,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAkB,aAExB,GAAID,EAAM,CAGR,IAASE,EAAT,SAA4BC,EAAK,CAC/B,aAAa,QAAQF,EAAiBE,EAAI,OAAO,KAAK,CACvD,EAJD,MAAMC,EAAa,aAAa,QAAQH,CAAe,EAKvDD,EAAK,iBAAiB,QAASE,CAAkB,EAEjDF,EAAK,SAAS,MAAM,MAAQI,GAA0B,GAEtD,eAAeC,EAAUC,EAAW,CAClC,GAAI,CACF,MAAMC,EAAW,MAAM,MACrB,mDACA,CACE,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CAAE,MAAOD,CAAS,CAAE,CAC1C,CACT,EACM,GAAI,CAACC,EAAS,GACZ,cAAQ,MAAM,eAAgBA,EAAS,MAAM,EACvC,IAAI,MAAM,iCAAiC,EAEnD,MAAMC,EAAO,MAAMD,EAAS,OAC5B,QAAQ,IAAI,2BAA4BC,CAAI,EAE5CC,EAAS,QAAQ,CACf,MAAO,uCACP,QACE,mJACF,SAAU,QAClB,CAAO,CACF,OAAQC,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACtD,CACF,CAEDV,EAAK,iBAAiB,SAAU,MAAMW,GAAK,CACzCA,EAAE,eAAc,EAChB,MAAML,EAAYF,EAClB,GAAIE,EACF,GAAI,CACF,MAAMD,EAAUC,CAAS,EACzB,aAAa,WAAWL,CAAe,EACvCD,EAAK,MAAK,CACX,OAAQU,EAAO,CACd,QAAQ,MAAM,8CAA+CA,CAAK,CACnE,MAED,QAAQ,IAAI,8BAA8B,CAEhD,CAAG,CACH,MACE,QAAQ,MAAM,mBAAmB"}