{"version":3,"file":"submit-email-footer-66fe4d4b.js","sources":["../../src/js/submit-email-footer.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.subs-form');\nconst localStorageKey = 'user-email';\n\nconst savedEmail = localStorage.getItem(localStorageKey);\n\nif (savedEmail) {\n  form.elements.email.value = savedEmail;\n} else {\n  form.elements.email.value = '';\n}\n\nform.addEventListener('input', saveToLocalStorage);\n\nfunction saveToLocalStorage(evt) {\n  localStorage.setItem(localStorageKey, evt.target.value);\n}\n\nasync function postEmail(userEmail) {\n  try {\n    const response = await fetch(\n      'https://energyflow.b.goit.study/api/subscription',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email: userEmail }),\n      }\n    );\n    if (!response.ok) {\n      console.error('Код помилки:', response.status);\n      throw new Error('Мережевий запит не був успішним');\n    }\n    const data = await response.json();\n    console.log('Дані успішно відправлені', data);\n\n    iziToast.success({\n      title: 'We are excited to have you on board!',\n      message:\n        'Thank you for subscribing to new exercises on Energy Flow. You have just taken a significant step towards improving your fitness and well-being.',\n      position: 'center',\n    });\n  } catch (error) {\n    console.error('Помилка при відправленні даних', error);\n  }\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const userEmail = localStorage.getItem(localStorageKey);\n  if (userEmail) {\n    try {\n      await postEmail(userEmail);\n      localStorage.removeItem(localStorageKey);\n      form.reset();\n    } catch (error) {\n      console.log('Помилка при відправленні електронної пошти.');\n    }\n  } else {\n    console.log('Електронна пошта не введена.');\n  }\n});\n\n// MODAL\nconst closeBtnFooter = document.querySelector('.footer-close-btn');\nconst backDropFooter = document.querySelector('.footer-modal-backdrop');\n\nconst openFooterModalBtn = document.querySelector('.footer-team-link');\nopenFooterModalBtn.addEventListener('click', function () {\n  backDropFooter.classList.add('is-open');\n});\n\ncloseBtnFooter.addEventListener('click', function () {\n  backDropFooter.classList.remove('is-open');\n});\n"],"names":["form","localStorageKey","savedEmail","saveToLocalStorage","evt","postEmail","userEmail","response","data","iziToast","error","e","closeBtnFooter","backDropFooter","openFooterModalBtn"],"mappings":"yCAGA,MAAMA,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAkB,aAElBC,EAAa,aAAa,QAAQD,CAAe,EAEnDC,EACFF,EAAK,SAAS,MAAM,MAAQE,EAE5BF,EAAK,SAAS,MAAM,MAAQ,GAG9BA,EAAK,iBAAiB,QAASG,CAAkB,EAEjD,SAASA,EAAmBC,EAAK,CAC/B,aAAa,QAAQH,EAAiBG,EAAI,OAAO,KAAK,CACxD,CAEA,eAAeC,EAAUC,EAAW,CAClC,GAAI,CACF,MAAMC,EAAW,MAAM,MACrB,mDACA,CACE,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CAAE,MAAOD,CAAS,CAAE,CAC1C,CACP,EACI,GAAI,CAACC,EAAS,GACZ,cAAQ,MAAM,eAAgBA,EAAS,MAAM,EACvC,IAAI,MAAM,iCAAiC,EAEnD,MAAMC,EAAO,MAAMD,EAAS,OAC5B,QAAQ,IAAI,2BAA4BC,CAAI,EAE5CC,EAAS,QAAQ,CACf,MAAO,uCACP,QACE,mJACF,SAAU,QAChB,CAAK,CACF,OAAQC,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACtD,CACH,CAEAV,EAAK,iBAAiB,SAAU,MAAMW,GAAK,CACzCA,EAAE,eAAc,EAChB,MAAML,EAAY,aAAa,QAAQL,CAAe,EACtD,GAAIK,EACF,GAAI,CACF,MAAMD,EAAUC,CAAS,EACzB,aAAa,WAAWL,CAAe,EACvCD,EAAK,MAAK,CACX,MAAe,CACd,QAAQ,IAAI,6CAA6C,CAC1D,MAED,QAAQ,IAAI,8BAA8B,CAE9C,CAAC,EAGD,MAAMY,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAiB,SAAS,cAAc,wBAAwB,EAEhEC,EAAqB,SAAS,cAAc,mBAAmB,EACrEA,EAAmB,iBAAiB,QAAS,UAAY,CACvDD,EAAe,UAAU,IAAI,SAAS,CACxC,CAAC,EAEDD,EAAe,iBAAiB,QAAS,UAAY,CACnDC,EAAe,UAAU,OAAO,SAAS,CAC3C,CAAC"}