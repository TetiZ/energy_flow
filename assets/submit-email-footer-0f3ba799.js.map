{"version":3,"file":"submit-email-footer-0f3ba799.js","sources":["../../src/js/submit-email-footer.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.subs-form');\nconst localStorageKey = 'user-email';\n\nconst savedEmail = localStorage.getItem(localStorageKey);\n\nfunction saveToLocalStorage(evt) {\n  localStorage.setItem(localStorageKey, evt.target.value);\n}\nform.addEventListener('input', saveToLocalStorage);\n\nform.elements.email.value = savedEmail ? savedEmail : '';\n\nasync function postEmail(userEmail) {\n  try {\n    const response = await fetch(\n      'https://energyflow.b.goit.study/api/subscription',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email: userEmail }),\n      }\n    );\n    if (!response.ok) {\n      console.error('Код помилки:', response.status);\n      throw new Error('Мережевий запит не був успішним');\n    }\n    const data = await response.json();\n    console.log('Дані успішно відправлені', data);\n\n    iziToast.success({\n      title: 'We are excited to have you on board!',\n      message:\n        'Thank you for subscribing to new exercises on Energy Flow. You have just taken a significant step towards improving your fitness and well-being.',\n      position: 'center',\n    });\n  } catch (error) {\n    console.error('Помилка при відправленні даних', error);\n  }\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const userEmail = savedEmail;\n  if (userEmail) {\n    try {\n      await postEmail(userEmail);\n      localStorage.removeItem(localStorageKey);\n      form.reset();\n    } catch (error) {\n      console.error('Помилка при відправленні електронної пошти.', error);\n    }\n  } else {\n    console.log('Електронна пошта не введена.');\n  }\n});\n"],"names":["form","localStorageKey","savedEmail","saveToLocalStorage","evt","postEmail","userEmail","response","data","iziToast","error","e"],"mappings":"yCAGA,MAAMA,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAkB,aAElBC,EAAa,aAAa,QAAQD,CAAe,EAEvD,SAASE,EAAmBC,EAAK,CAC/B,aAAa,QAAQH,EAAiBG,EAAI,OAAO,KAAK,CACxD,CACAJ,EAAK,iBAAiB,QAASG,CAAkB,EAEjDH,EAAK,SAAS,MAAM,MAAQE,GAA0B,GAEtD,eAAeG,EAAUC,EAAW,CAClC,GAAI,CACF,MAAMC,EAAW,MAAM,MACrB,mDACA,CACE,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CAAE,MAAOD,CAAS,CAAE,CAC1C,CACP,EACI,GAAI,CAACC,EAAS,GACZ,cAAQ,MAAM,eAAgBA,EAAS,MAAM,EACvC,IAAI,MAAM,iCAAiC,EAEnD,MAAMC,EAAO,MAAMD,EAAS,OAC5B,QAAQ,IAAI,2BAA4BC,CAAI,EAE5CC,EAAS,QAAQ,CACf,MAAO,uCACP,QACE,mJACF,SAAU,QAChB,CAAK,CACF,OAAQC,EAAO,CACd,QAAQ,MAAM,iCAAkCA,CAAK,CACtD,CACH,CAEAV,EAAK,iBAAiB,SAAU,MAAMW,GAAK,CACzCA,EAAE,eAAc,EAChB,MAAML,EAAYJ,EAClB,GAAII,EACF,GAAI,CACF,MAAMD,EAAUC,CAAS,EACzB,aAAa,WAAWL,CAAe,EACvCD,EAAK,MAAK,CACX,OAAQU,EAAO,CACd,QAAQ,MAAM,8CAA+CA,CAAK,CACnE,MAED,QAAQ,IAAI,8BAA8B,CAE9C,CAAC"}